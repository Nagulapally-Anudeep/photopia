require("dotenv").config();

const fs = require("fs");
const http = require("http");
const https = require("https");
const app = require("..");

const httpPort = process.env.HTTP_PORT || 80;
const httpsPort = process.env.HTTPS_PORT || 443;

const httpsOptions = {
    key: fs.readFileSync(process.env.HTTPS_KEY_FILE),
    cert: fs.readFileSync(process.env.HTTPS_CERT_FILE)
}

http.createServer(app).listen(httpPort, () => console.log(`HTTP Server running on port ${httpPort}`));
https.createServer(httpsOptions, app).listen(httpsPort, () => . console.log(`HTTPS server running on port ${httpsPort}`));